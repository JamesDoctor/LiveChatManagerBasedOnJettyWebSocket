<html>
	<head>
		<meta charset="utf-8">
		<script type="text/javascript" src="scripts/jquery-3.1.1.js"></script>
	</head>
	<body>
	    <H1>Hello, this is Company Agent!</H1>
		<div>
		    <div class="chatRecords">
			</div>
		    <input type="text" name="message" id="message" class="inputMessage">
		    <input type="button" name="sendMessage" id="sendMessage" value="Send Message" class="sendMessageBtn">
		</div>
		<!-- Start of LiveChat (www.livechatinc.com) code -->
		<script type="text/javascript">
		    function appendChatRecord(message) {
					$(".chatRecords").append("<div class='chatMessage'>" + message + "</div>");
			}
			
		    window.alert("Click OK to send websocket message...");
			ws = new WebSocket("ws://localhost:8180/CompanyAgent/events?Company=Schlumberger"); 
			ws.onopen = function(){ws.send("Company Agent ready!"); }; 
			ws.onmessage = function(evt){
			    console.log(evt.data);
				appendChatRecord(evt.data);
			}; 
			ws.onclose = function(evt){console.log("WebSocketClosed!");}; 
			ws.onerror = function(evt){console.log("WebSocketError!");};
			
			$(".sendMessageBtn").bind("click", function() {
			    var msg = $(".inputMessage")[0].value;
				if (msg) {
				    ws.send(msg);
					appendChatRecord("Company Agent: " + msg);
					$(".inputMessage")[0].value = "";
				}
			});
		</script>
		<!-- End of LiveChat code -->
	</body>
</html>